import{a as k}from"./chunk-GDGJRGY4.js";import{a as E,b as T,c as I,d as W,e as F,f as N,g as L,h as B,i as z}from"./chunk-SOLGAOLQ.js";import{Aa as x,Ma as P,Na as V,Q as S,Qa as A,Ua as O,W as g,X as m,da as o,ea as v,ia as C,ka as d,ma as n,na as r,pa as M,qa as u,ra as _,sa as c,ua as w,wa as b,xa as f,ya as h}from"./chunk-4K6JBKNM.js";import"./chunk-PZ5UXJ7I.js";function q(l,y){if(l&1&&(n(0,"div",24),c(1),r()),l&2){let t=_();o(),w(" ",t.submitError," ")}}function D(l,y){if(l&1){let t=M();n(0,"span",27),c(1),n(2,"button",28),u("click",function(){let e=g(t).$implicit,s=_(2);return m(s.removeCategory(e))}),c(3,"\xD7"),r()()}if(l&2){let t=y.$implicit,a=_(2);o(),w(" ",t," "),o(),d("disabled",a.isSubmitting)}}function R(l,y){if(l&1&&(n(0,"div",25),C(1,D,4,2,"span",26),r()),l&2){let t=_();o(),d("ngForOf",t.article.categories)}}function j(l,y){if(l&1){let t=M();n(0,"span",27),c(1),n(2,"button",28),u("click",function(){let e=g(t).$implicit,s=_(2);return m(s.removeTag(e))}),c(3,"\xD7"),r()()}if(l&2){let t=y.$implicit,a=_(2);o(),w(" ",t," "),o(),d("disabled",a.isSubmitting)}}function G(l,y){if(l&1&&(n(0,"div",25),C(1,j,4,2,"span",26),r()),l&2){let t=_();o(),d("ngForOf",t.article.tags)}}var Z=(()=>{class l{constructor(t,a){this.articleService=t,this.router=a,this.article={title:"",content:"",excerpt:"",author:"",categories:[],tags:[],featured:!1},this.categoryInput="",this.tagInput="",this.isSubmitting=!1,this.submitError=null}addCategory(){this.categoryInput.trim()&&!this.article.categories?.includes(this.categoryInput.trim())&&(this.article.categories=[...this.article.categories||[],this.categoryInput.trim()],this.categoryInput="")}removeCategory(t){this.article.categories=this.article.categories?.filter(a=>a!==t)||[]}addTag(){this.tagInput.trim()&&!this.article.tags?.includes(this.tagInput.trim())&&(this.article.tags=[...this.article.tags||[],this.tagInput.trim()],this.tagInput="")}removeTag(t){this.article.tags=this.article.tags?.filter(a=>a!==t)||[]}generateSlug(t){return t.toLowerCase().replace(/[^a-z0-9\s-]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-").trim()}calculateReadingTime(t){let e=t.split(/\s+/).length;return Math.ceil(e/200)}onSubmit(){if(this.isFormValid()&&!this.isSubmitting){this.isSubmitting=!0,this.submitError=null;let t={title:this.article.title,slug:this.generateSlug(this.article.title),content:this.article.content,excerpt:this.article.excerpt,author:this.article.author,categories:this.article.categories,tags:this.article.tags,readingTime:this.calculateReadingTime(this.article.content),featured:this.article.featured};this.articleService.addArticle(t).subscribe({next:a=>{console.log("Article added successfully:",a),this.router.navigate(["/categories"])},error:a=>{console.error("Error adding article:",a),this.submitError="Failed to add article. Please try again.",this.isSubmitting=!1},complete:()=>{this.isSubmitting=!1}})}}isFormValid(){return!!(this.article.title?.trim()&&this.article.content?.trim()&&this.article.excerpt?.trim()&&this.article.author?.trim()&&this.article.categories?.length&&this.article.tags?.length)}onCancel(){this.router.navigate(["/categories"])}static{this.\u0275fac=function(a){return new(a||l)(v(k),v(O))}}static{this.\u0275cmp=S({type:l,selectors:[["app-add"]],standalone:!0,features:[x],decls:48,vars:22,consts:[["articleForm","ngForm"],[1,"container"],[1,"add-article-form"],[1,"page-title"],["class","error-message",4,"ngIf"],[3,"ngSubmit"],[1,"form-group"],["for","title"],["type","text","id","title","name","title","required","","placeholder","Enter article title",1,"form-control",3,"ngModelChange","ngModel","disabled"],["for","author"],["type","text","id","author","name","author","required","","placeholder","Enter author name",1,"form-control",3,"ngModelChange","ngModel","disabled"],["for","excerpt"],["id","excerpt","name","excerpt","required","","rows","3","placeholder","Enter a brief excerpt",1,"form-control",3,"ngModelChange","ngModel","disabled"],["for","content"],["id","content","name","content","required","","rows","10","placeholder","Enter article content (Markdown supported)",1,"form-control","content-textarea",3,"ngModelChange","ngModel","disabled"],[1,"input-with-button"],["type","text","name","categoryInput","placeholder","Add a category",1,"form-control",3,"ngModelChange","keyup.enter","ngModel","disabled"],["type","button",1,"btn","btn-secondary",3,"click","disabled"],["class","tags-display",4,"ngIf"],["type","text","name","tagInput","placeholder","Add a tag",1,"form-control",3,"ngModelChange","keyup.enter","ngModel","disabled"],[1,"checkbox-label"],["type","checkbox","name","featured",3,"ngModelChange","ngModel","disabled"],[1,"form-actions"],["type","submit",1,"btn","btn-primary",3,"disabled"],[1,"error-message"],[1,"tags-display"],["class","tag",4,"ngFor","ngForOf"],[1,"tag"],["type","button",1,"tag-remove",3,"click","disabled"]],template:function(a,e){if(a&1){let s=M();n(0,"div",1)(1,"div",2)(2,"h1",3),c(3,"Add New Article"),r(),C(4,q,2,1,"div",4),n(5,"form",5,0),u("ngSubmit",function(){return g(s),m(e.onSubmit())}),n(7,"div",6)(8,"label",7),c(9,"Title *"),r(),n(10,"input",8),h("ngModelChange",function(i){return g(s),f(e.article.title,i)||(e.article.title=i),m(i)}),r()(),n(11,"div",6)(12,"label",9),c(13,"Author *"),r(),n(14,"input",10),h("ngModelChange",function(i){return g(s),f(e.article.author,i)||(e.article.author=i),m(i)}),r()(),n(15,"div",6)(16,"label",11),c(17,"Excerpt *"),r(),n(18,"textarea",12),h("ngModelChange",function(i){return g(s),f(e.article.excerpt,i)||(e.article.excerpt=i),m(i)}),r()(),n(19,"div",6)(20,"label",13),c(21,"Content *"),r(),n(22,"textarea",14),h("ngModelChange",function(i){return g(s),f(e.article.content,i)||(e.article.content=i),m(i)}),r()(),n(23,"div",6)(24,"label"),c(25,"Categories *"),r(),n(26,"div",15)(27,"input",16),h("ngModelChange",function(i){return g(s),f(e.categoryInput,i)||(e.categoryInput=i),m(i)}),u("keyup.enter",function(){return g(s),m(e.addCategory())}),r(),n(28,"button",17),u("click",function(){return g(s),m(e.addCategory())}),c(29,"Add"),r()(),C(30,R,2,1,"div",18),r(),n(31,"div",6)(32,"label"),c(33,"Tags *"),r(),n(34,"div",15)(35,"input",19),h("ngModelChange",function(i){return g(s),f(e.tagInput,i)||(e.tagInput=i),m(i)}),u("keyup.enter",function(){return g(s),m(e.addTag())}),r(),n(36,"button",17),u("click",function(){return g(s),m(e.addTag())}),c(37,"Add"),r()(),C(38,G,2,1,"div",18),r(),n(39,"div",6)(40,"label",20)(41,"input",21),h("ngModelChange",function(i){return g(s),f(e.article.featured,i)||(e.article.featured=i),m(i)}),r(),c(42," Featured Article "),r()(),n(43,"div",22)(44,"button",17),u("click",function(){return g(s),m(e.onCancel())}),c(45,"Cancel"),r(),n(46,"button",23),c(47),r()()()()()}a&2&&(o(4),d("ngIf",e.submitError),o(6),b("ngModel",e.article.title),d("disabled",e.isSubmitting),o(4),b("ngModel",e.article.author),d("disabled",e.isSubmitting),o(4),b("ngModel",e.article.excerpt),d("disabled",e.isSubmitting),o(4),b("ngModel",e.article.content),d("disabled",e.isSubmitting),o(5),b("ngModel",e.categoryInput),d("disabled",e.isSubmitting),o(),d("disabled",e.isSubmitting),o(2),d("ngIf",e.article.categories&&e.article.categories.length>0),o(5),b("ngModel",e.tagInput),d("disabled",e.isSubmitting),o(),d("disabled",e.isSubmitting),o(2),d("ngIf",e.article.tags&&e.article.tags.length>0),o(3),b("ngModel",e.article.featured),d("disabled",e.isSubmitting),o(3),d("disabled",e.isSubmitting),o(2),d("disabled",!e.isFormValid()||e.isSubmitting),o(),w(" ",e.isSubmitting?"Adding...":"Add Article"," "))},dependencies:[A,P,V,z,L,T,E,I,W,B,N,F],styles:[".add-article-form[_ngcontent-%COMP%]{max-width:800px;margin:0 auto;background:var(--surface-color);padding:2rem;border-radius:.5rem;box-shadow:0 1px 3px #0000001a}.page-title[_ngcontent-%COMP%]{font-size:2rem;margin-bottom:2rem;color:var(--text-color);text-align:center}.error-message[_ngcontent-%COMP%]{background:#fee2e2;color:#dc2626;padding:1rem;border-radius:.375rem;margin-bottom:1.5rem;border:1px solid #fecaca}.form-group[_ngcontent-%COMP%]{margin-bottom:1.5rem}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:.5rem;font-weight:500;color:var(--text-color)}.form-control[_ngcontent-%COMP%]{width:100%;padding:.75rem;border:1px solid var(--border-color);border-radius:.375rem;background:var(--background-color);color:var(--text-color);font-size:1rem;transition:border-color .2s,box-shadow .2s}.form-control[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--primary-color);box-shadow:0 0 0 3px #2563eb1a}.form-control[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.content-textarea[_ngcontent-%COMP%]{min-height:200px;resize:vertical;font-family:Courier New,monospace}.input-with-button[_ngcontent-%COMP%]{display:flex;gap:.5rem;align-items:center}.input-with-button[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{flex:1}.tags-display[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:.5rem;margin-top:.5rem}.tag[_ngcontent-%COMP%]{background:var(--primary-color);color:#fff;padding:.25rem .75rem;border-radius:1rem;font-size:.875rem;display:flex;align-items:center;gap:.5rem}.tag-remove[_ngcontent-%COMP%]{background:none;border:none;color:#fff;font-size:1.2rem;cursor:pointer;padding:0;line-height:1}.tag-remove[_ngcontent-%COMP%]:hover:not(:disabled){opacity:.8}.tag-remove[_ngcontent-%COMP%]:disabled{cursor:not-allowed;opacity:.5}.checkbox-label[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;cursor:pointer}.checkbox-label[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{width:auto;margin:0}.checkbox-label[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]:disabled{cursor:not-allowed}.form-actions[_ngcontent-%COMP%]{display:flex;gap:1rem;justify-content:flex-end;margin-top:2rem;padding-top:1rem;border-top:1px solid var(--border-color)}.btn[_ngcontent-%COMP%]{padding:.75rem 1.5rem;border-radius:.375rem;border:none;font-weight:500;cursor:pointer;transition:opacity .2s,transform .1s;text-decoration:none;display:inline-block;text-align:center}.btn[_ngcontent-%COMP%]:hover:not(:disabled){opacity:.9;transform:translateY(-1px)}.btn[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed;transform:none}.btn-primary[_ngcontent-%COMP%]{background:var(--primary-color);color:#fff}.btn-secondary[_ngcontent-%COMP%]{background:var(--border-color);color:var(--text-color)}@media (max-width: 768px){.add-article-form[_ngcontent-%COMP%]{margin:0 1rem;padding:1rem}.form-actions[_ngcontent-%COMP%], .input-with-button[_ngcontent-%COMP%]{flex-direction:column}.input-with-button[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{margin-bottom:.5rem}}"]})}}return l})();export{Z as AddComponent};
